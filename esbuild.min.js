var Ie=Object.defineProperty,De=(e,n)=>{for(var r in n)Ie(e,r,{get:n[r],enumerable:!0})},pe={};De(pe,{analyzeMetafile:()=>tt,analyzeMetafileSync:()=>it,build:()=>Ne,buildSync:()=>nt,default:()=>ot,formatMessages:()=>et,formatMessagesSync:()=>st,initialize:()=>Ae,serve:()=>Ke,transform:()=>Ze,transformSync:()=>rt,version:()=>He});function be(e){let n=p=>{if(p===null)r.write8(0);else if(typeof p=="boolean")r.write8(1),r.write8(+p);else if(typeof p=="number")r.write8(2),r.write32(p|0);else if(typeof p=="string")r.write8(3),r.write(Q(p));else if(p instanceof Uint8Array)r.write8(4),r.write(p);else if(p instanceof Array){r.write8(5),r.write32(p.length);for(let g of p)n(g)}else{let g=Object.keys(p);r.write8(6),r.write32(g.length);for(let v of g)r.write(Q(v)),n(p[v])}},r=new ke;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),n(e.value),me(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function Me(e){let n=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return se(r.read());case 4:return r.read();case 5:{let a=r.read32(),w=[];for(let m=0;m<a;m++)w.push(n());return w}case 6:{let a=r.read32(),w={};for(let m=0;m<a;m++)w[se(r.read())]=n();return w}default:throw new Error("Invalid packet")}},r=new ke(e),p=r.read32(),g=(p&1)===0;p>>>=1;let v=n();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:p,isRequest:g,value:v}}var ke=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let n=new Uint8Array((this.len+e)*2);n.set(this.buf),this.buf=n}return this.len+=e,this.len-e}write8(e){let n=this._write(1);this.buf[n]=e}write32(e){let n=this._write(4);me(this.buf,e,n)}write(e){let n=this._write(4+e.length);me(this.buf,e.length,n),this.buf.set(e,n+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return Te(this.buf,this._read(4))}read(){let e=this.read32(),n=new Uint8Array(e),r=this._read(n.length);return n.set(this.buf.subarray(r,r+e)),n}},Q,se;if(typeof TextEncoder<"u"&&typeof TextDecoder<"u"){let e=new TextEncoder,n=new TextDecoder;Q=r=>e.encode(r),se=r=>n.decode(r)}else if(typeof Buffer<"u")Q=e=>{let n=Buffer.from(e);return n instanceof Uint8Array||(n=new Uint8Array(n)),n},se=e=>{let{buffer:n,byteOffset:r,byteLength:p}=e;return Buffer.from(n,r,p).toString()};else throw new Error("No UTF-8 codec found");function Te(e,n){return e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24}function me(e,n,r){e[r++]=n,e[r++]=n>>8,e[r++]=n>>16,e[r++]=n>>24}var ve="warning",xe="silent";function Ee(e){if(e+="",e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var ue=()=>null,P=e=>typeof e=="boolean"?null:"a boolean",Pe=e=>typeof e=="boolean"||typeof e=="object"&&!Array.isArray(e)?null:"a boolean or an object",k=e=>typeof e=="string"?null:"a string",ce=e=>e instanceof RegExp?null:"a RegExp object",ne=e=>typeof e=="number"&&e===(e|0)?null:"an integer",ge=e=>typeof e=="function"?null:"a function",z=e=>Array.isArray(e)?null:"an array",X=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",We=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",Fe=e=>typeof e=="object"&&e!==null?null:"an array or an object",_e=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",je=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",Le=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",ze=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",Oe=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array";function s(e,n,r,p){let g=e[r];if(n[r+""]=!0,g===void 0)return;let v=p(g);if(v!==null)throw new Error(`"${r}" must be ${v}`);return g}function B(e,n,r){for(let p in e)if(!(p in n))throw new Error(`Invalid option ${r}: "${p}"`)}function Be(e){let n=Object.create(null),r=s(e,n,"wasmURL",k),p=s(e,n,"wasmModule",We),g=s(e,n,"worker",P);return B(e,n,"in initialize() call"),{wasmURL:r,wasmModule:p,worker:g}}function Re(e){let n;if(e!==void 0){n=Object.create(null);for(let r of Object.keys(e)){let p=e[r];if(typeof p=="string"||p===!1)n[r]=p;else throw new Error(`Expected ${JSON.stringify(r)} in mangle cache to map to either a string or false`)}}return n}function he(e,n,r,p,g){let v=s(n,r,"color",P),a=s(n,r,"logLevel",k),w=s(n,r,"logLimit",ne);v!==void 0?e.push(`--color=${v}`):p&&e.push("--color=true"),e.push(`--log-level=${a||g}`),e.push(`--log-limit=${w||0}`)}function Se(e,n,r){let p=s(n,r,"legalComments",k),g=s(n,r,"sourceRoot",k),v=s(n,r,"sourcesContent",P),a=s(n,r,"target",ze),w=s(n,r,"format",k),m=s(n,r,"globalName",k),j=s(n,r,"mangleProps",ce),$=s(n,r,"reserveProps",ce),y=s(n,r,"mangleQuoted",P),O=s(n,r,"minify",P),A=s(n,r,"minifySyntax",P),T=s(n,r,"minifyWhitespace",P),o=s(n,r,"minifyIdentifiers",P),l=s(n,r,"drop",z),u=s(n,r,"charset",k),c=s(n,r,"treeShaking",P),x=s(n,r,"ignoreAnnotations",P),f=s(n,r,"jsx",k),b=s(n,r,"jsxFactory",k),t=s(n,r,"jsxFragment",k),i=s(n,r,"jsxImportSource",k),d=s(n,r,"jsxDev",P),h=s(n,r,"jsxSideEffects",P),E=s(n,r,"define",X),U=s(n,r,"logOverride",X),C=s(n,r,"supported",X),R=s(n,r,"pure",z),F=s(n,r,"keepNames",P),I=s(n,r,"platform",k);if(p&&e.push(`--legal-comments=${p}`),g!==void 0&&e.push(`--source-root=${g}`),v!==void 0&&e.push(`--sources-content=${v}`),a&&(Array.isArray(a)?e.push(`--target=${Array.from(a).map(Ee).join(",")}`):e.push(`--target=${Ee(a)}`)),w&&e.push(`--format=${w}`),m&&e.push(`--global-name=${m}`),I&&e.push(`--platform=${I}`),O&&e.push("--minify"),A&&e.push("--minify-syntax"),T&&e.push("--minify-whitespace"),o&&e.push("--minify-identifiers"),u&&e.push(`--charset=${u}`),c!==void 0&&e.push(`--tree-shaking=${c}`),x&&e.push("--ignore-annotations"),l)for(let S of l)e.push(`--drop:${S}`);if(j&&e.push(`--mangle-props=${j.source}`),$&&e.push(`--reserve-props=${$.source}`),y!==void 0&&e.push(`--mangle-quoted=${y}`),f&&e.push(`--jsx=${f}`),b&&e.push(`--jsx-factory=${b}`),t&&e.push(`--jsx-fragment=${t}`),i&&e.push(`--jsx-import-source=${i}`),d&&e.push("--jsx-dev"),h&&e.push("--jsx-side-effects"),E)for(let S in E){if(S.indexOf("=")>=0)throw new Error(`Invalid define: ${S}`);e.push(`--define:${S}=${E[S]}`)}if(U)for(let S in U){if(S.indexOf("=")>=0)throw new Error(`Invalid log override: ${S}`);e.push(`--log-override:${S}=${U[S]}`)}if(C)for(let S in C){if(S.indexOf("=")>=0)throw new Error(`Invalid supported: ${S}`);e.push(`--supported:${S}=${C[S]}`)}if(R)for(let S of R)e.push(`--pure:${S}`);F&&e.push("--keep-names")}function Je(e,n,r,p,g){var v;let a=[],w=[],m=Object.create(null),j=null,$=null,y=null;he(a,n,m,r,p),Se(a,n,m);let O=s(n,m,"sourcemap",je),A=s(n,m,"bundle",P),T=s(n,m,"watch",Pe),o=s(n,m,"splitting",P),l=s(n,m,"preserveSymlinks",P),u=s(n,m,"metafile",P),c=s(n,m,"outfile",k),x=s(n,m,"outdir",k),f=s(n,m,"outbase",k),b=s(n,m,"tsconfig",k),t=s(n,m,"resolveExtensions",z),i=s(n,m,"nodePaths",z),d=s(n,m,"mainFields",z),h=s(n,m,"conditions",z),E=s(n,m,"external",z),U=s(n,m,"loader",X),C=s(n,m,"outExtension",X),R=s(n,m,"publicPath",k),F=s(n,m,"entryNames",k),I=s(n,m,"chunkNames",k),S=s(n,m,"assetNames",k),L=s(n,m,"inject",z),M=s(n,m,"banner",X),W=s(n,m,"footer",X),q=s(n,m,"entryPoints",Fe),N=s(n,m,"absWorkingDir",k),J=s(n,m,"stdin",X),V=(v=s(n,m,"write",P))!=null?v:g,G=s(n,m,"allowOverwrite",P),K=s(n,m,"incremental",P)===!0,ie=s(n,m,"mangleCache",X);if(m.plugins=!0,B(n,m,`in ${e}() call`),O&&a.push(`--sourcemap${O===!0?"":`=${O}`}`),A&&a.push("--bundle"),G&&a.push("--allow-overwrite"),T)if(a.push("--watch"),typeof T=="boolean")y={};else{let _=Object.create(null),D=s(T,_,"onRebuild",ge);B(T,_,`on "watch" in ${e}() call`),y={onRebuild:D}}if(o&&a.push("--splitting"),l&&a.push("--preserve-symlinks"),u&&a.push("--metafile"),c&&a.push(`--outfile=${c}`),x&&a.push(`--outdir=${x}`),f&&a.push(`--outbase=${f}`),b&&a.push(`--tsconfig=${b}`),t){let _=[];for(let D of t){if(D+="",D.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${D}`);_.push(D)}a.push(`--resolve-extensions=${_.join(",")}`)}if(R&&a.push(`--public-path=${R}`),F&&a.push(`--entry-names=${F}`),I&&a.push(`--chunk-names=${I}`),S&&a.push(`--asset-names=${S}`),d){let _=[];for(let D of d){if(D+="",D.indexOf(",")>=0)throw new Error(`Invalid main field: ${D}`);_.push(D)}a.push(`--main-fields=${_.join(",")}`)}if(h){let _=[];for(let D of h){if(D+="",D.indexOf(",")>=0)throw new Error(`Invalid condition: ${D}`);_.push(D)}a.push(`--conditions=${_.join(",")}`)}if(E)for(let _ of E)a.push(`--external:${_}`);if(M)for(let _ in M){if(_.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${_}`);a.push(`--banner:${_}=${M[_]}`)}if(W)for(let _ in W){if(_.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${_}`);a.push(`--footer:${_}=${W[_]}`)}if(L)for(let _ of L)a.push(`--inject:${_}`);if(U)for(let _ in U){if(_.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${_}`);a.push(`--loader:${_}=${U[_]}`)}if(C)for(let _ in C){if(_.indexOf("=")>=0)throw new Error(`Invalid out extension: ${_}`);a.push(`--out-extension:${_}=${C[_]}`)}if(q)if(Array.isArray(q))for(let _ of q)w.push(["",_+""]);else for(let[_,D]of Object.entries(q))w.push([_+"",D+""]);if(J){let _=Object.create(null),D=s(J,_,"contents",Oe),le=s(J,_,"resolveDir",k),we=s(J,_,"sourcefile",k),ye=s(J,_,"loader",k);B(J,_,'in "stdin" object'),we&&a.push(`--sourcefile=${we}`),ye&&a.push(`--loader=${ye}`),le&&($=le+""),typeof D=="string"?j=Q(D):D instanceof Uint8Array&&(j=D)}let Y=[];if(i)for(let _ of i)_+="",Y.push(_);return{entries:w,flags:a,write:V,stdinContents:j,stdinResolveDir:$,absWorkingDir:N,incremental:K,nodePaths:Y,watch:y,mangleCache:Re(ie)}}function qe(e,n,r,p){let g=[],v=Object.create(null);he(g,n,v,r,p),Se(g,n,v);let a=s(n,v,"sourcemap",je),w=s(n,v,"tsconfigRaw",Le),m=s(n,v,"sourcefile",k),j=s(n,v,"loader",k),$=s(n,v,"banner",k),y=s(n,v,"footer",k),O=s(n,v,"mangleCache",X);return B(n,v,`in ${e}() call`),a&&g.push(`--sourcemap=${a===!0?"external":a}`),w&&g.push(`--tsconfig-raw=${typeof w=="string"?w:JSON.stringify(w)}`),m&&g.push(`--sourcefile=${m}`),j&&g.push(`--loader=${j}`),$&&g.push(`--banner=${$}`),y&&g.push(`--footer=${y}`),{flags:g,mangleCache:Re(O)}}function Ve(e){let n={},r={didClose:!1,reason:""},p={},g=0,v=0,a=new Uint8Array(16*1024),w=0,m=o=>{let l=w+o.length;if(l>a.length){let c=new Uint8Array(l*2);c.set(a),a=c}a.set(o,w),w+=o.length;let u=0;for(;u+4<=w;){let c=Te(a,u);if(u+4+c>w)break;u+=4,T(a.subarray(u,u+c)),u+=c}u>0&&(a.copyWithin(0,u,w),w-=u)},j=o=>{r.didClose=!0,o&&(r.reason=": "+(o.message||o));let l="The service was stopped"+r.reason;for(let u in p)p[u](l,null);p={}},$=(o,l,u)=>{if(r.didClose)return u("The service is no longer running"+r.reason,null);let c=g++;p[c]=(x,f)=>{try{u(x,f)}finally{o&&o.unref()}},o&&o.ref(),e.writeToStdin(be({id:c,isRequest:!0,value:l}))},y=(o,l)=>{if(r.didClose)throw new Error("The service is no longer running"+r.reason);e.writeToStdin(be({id:o,isRequest:!1,value:l}))},O=async(o,l)=>{try{if(l.command==="ping"){y(o,{});return}if(typeof l.key=="number"){let u=n[l.key];if(u){let c=u[l.command];if(c){await c(o,l);return}}}throw new Error("Invalid command: "+l.command)}catch(u){y(o,{errors:[re(u,e,null,void 0,"")]})}},A=!0,T=o=>{if(A){A=!1;let u=String.fromCharCode(...o);if(u!=="0.15.13")throw new Error(`Cannot start service: Host version "0.15.13" does not match binary version ${JSON.stringify(u)}`);return}let l=Me(o);if(l.isRequest)O(l.id,l.value);else{let u=p[l.id];delete p[l.id],l.value.error?u(l.value.error,{}):u(null,l.value)}};return{readFromStdout:m,afterClose:j,service:{buildOrServe:({callName:o,refs:l,serveOptions:u,options:c,isTTY:x,defaultWD:f,callback:b})=>{let t=0,i=v++,d={},h={ref(){++t===1&&l&&l.ref()},unref(){--t===0&&(delete n[i],l&&l.unref())}};n[i]=d,h.ref(),Ge(o,i,$,y,h,e,d,c,u,x,f,r,(E,U)=>{try{b(E,U)}finally{h.unref()}})},transform:({callName:o,refs:l,input:u,options:c,isTTY:x,fs:f,callback:b})=>{let t=Ue(),i=d=>{try{if(typeof u!="string"&&!(u instanceof Uint8Array))throw new Error('The input to "transform" must be a string or a Uint8Array');let{flags:h,mangleCache:E}=qe(o,c,x,xe),U={command:"transform",flags:h,inputFS:d!==null,input:d!==null?Q(d):typeof u=="string"?Q(u):u};E&&(U.mangleCache=E),$(l,U,(C,R)=>{if(C)return b(new Error(C),null);let F=H(R.errors,t),I=H(R.warnings,t),S=1,L=()=>{if(--S===0){let M={warnings:I,code:R.code,map:R.map};R.mangleCache&&(M.mangleCache=R?.mangleCache),b(null,M)}};if(F.length>0)return b(te("Transform failed",F,I),null);R.codeFS&&(S++,f.readFile(R.code,(M,W)=>{M!==null?b(M,null):(R.code=W,L())})),R.mapFS&&(S++,f.readFile(R.map,(M,W)=>{M!==null?b(M,null):(R.map=W,L())})),L()})}catch(h){let E=[];try{he(E,c,{},x,xe)}catch{}let U=re(h,e,t,void 0,"");$(l,{command:"error",flags:E,error:U},()=>{U.detail=t.load(U.detail),b(te("Transform failed",[U],[]),null)})}};if((typeof u=="string"||u instanceof Uint8Array)&&u.length>1024*1024){let d=i;i=()=>f.writeFile(u,d)}i(null)},formatMessages:({callName:o,refs:l,messages:u,options:c,callback:x})=>{let f=Z(u,"messages",null,"");if(!c)throw new Error(`Missing second argument in ${o}() call`);let b={},t=s(c,b,"kind",k),i=s(c,b,"color",P),d=s(c,b,"terminalWidth",ne);if(B(c,b,`in ${o}() call`),t===void 0)throw new Error(`Missing "kind" in ${o}() call`);if(t!=="error"&&t!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${o}() call`);let h={command:"format-msgs",messages:f,isWarning:t==="warning"};i!==void 0&&(h.color=i),d!==void 0&&(h.terminalWidth=d),$(l,h,(E,U)=>{if(E)return x(new Error(E),null);x(null,U.messages)})},analyzeMetafile:({callName:o,refs:l,metafile:u,options:c,callback:x})=>{c===void 0&&(c={});let f={},b=s(c,f,"color",P),t=s(c,f,"verbose",P);B(c,f,`in ${o}() call`);let i={command:"analyze-metafile",metafile:u};b!==void 0&&(i.color=b),t!==void 0&&(i.verbose=t),$(l,i,(d,h)=>{if(d)return x(new Error(d),null);x(null,h.result)})}}}}function Ge(e,n,r,p,g,v,a,w,m,j,$,y,O){let A=Ue(),T=(c,x,f,b)=>{let t=[];try{he(t,w,{},j,ve)}catch{}let i=re(c,v,A,f,x);r(g,{command:"error",flags:t,error:i},()=>{i.detail=A.load(i.detail),b(i)})},o=(c,x)=>{T(c,x,void 0,f=>{O(te("Build failed",[f],[]),null)})},l;if(typeof w=="object"){let c=w.plugins;if(c!==void 0){if(!Array.isArray(c))throw new Error('"plugins" must be an array');l=c}}if(l&&l.length>0){if(v.isSync){o(new Error("Cannot use plugins in synchronous API calls"),"");return}Xe(n,r,p,g,v,a,w,l,A).then(c=>{if(!c.ok){o(c.error,c.pluginName);return}try{u(c.requestPlugins,c.runOnEndCallbacks)}catch(x){o(x,"")}},c=>o(c,""));return}try{u(null,(c,x,f)=>f())}catch(c){o(c,"")}function u(c,x){let f=!v.isWriteUnavailable,{entries:b,flags:t,write:i,stdinContents:d,stdinResolveDir:h,absWorkingDir:E,incremental:U,nodePaths:C,watch:R,mangleCache:F}=Je(e,w,j,ve,f),I={command:"build",key:n,entries:b,flags:t,write:i,stdinContents:d,stdinResolveDir:h,absWorkingDir:E||$,incremental:U,nodePaths:C};c&&(I.plugins=c),F&&(I.mangleCache=F);let S=m&&Ye(n,r,p,g,a,m,I),L,M,W=(N,J)=>{N.outputFiles&&(J.outputFiles=N.outputFiles.map(Qe)),N.metafile&&(J.metafile=JSON.parse(N.metafile)),N.mangleCache&&(J.mangleCache=N.mangleCache),N.writeToStdout!==void 0&&console.log(se(N.writeToStdout).replace(/\n$/,""))},q=(N,J)=>{let V={errors:H(N.errors,A),warnings:H(N.warnings,A)};W(N,V),x(V,T,()=>{if(V.errors.length>0)return J(te("Build failed",V.errors,V.warnings),null);if(N.rebuild){if(!L){let G=!1;L=()=>new Promise((K,ie)=>{if(G||y.didClose)throw new Error("Cannot rebuild");r(g,{command:"rebuild",key:n},(Y,_)=>{if(Y)return J(te("Build failed",[{id:"",pluginName:"",text:Y,location:null,notes:[],detail:void 0}],[]),null);q(_,(D,le)=>{D?ie(D):K(le)})})}),g.ref(),L.dispose=()=>{G||(G=!0,r(g,{command:"rebuild-dispose",key:n},()=>{}),g.unref())}}V.rebuild=L}if(N.watch){if(!M){let G=!1;g.ref(),M=()=>{G||(G=!0,delete a["watch-rebuild"],r(g,{command:"watch-stop",key:n},()=>{}),g.unref())},R&&(a["watch-rebuild"]=(K,ie)=>{try{let Y=ie.args,_={errors:H(Y.errors,A),warnings:H(Y.warnings,A)};W(Y,_),x(_,T,()=>{if(_.errors.length>0){R.onRebuild&&R.onRebuild(te("Build failed",_.errors,_.warnings),null);return}_.stop=M,R.onRebuild&&R.onRebuild(null,_)})}catch(Y){console.error(Y)}p(K,{})})}V.stop=M}J(null,V)})};if(i&&v.isWriteUnavailable)throw new Error('The "write" option is unavailable in this environment');if(U&&v.isSync)throw new Error('Cannot use "incremental" with a synchronous build');if(R&&v.isSync)throw new Error('Cannot use "watch" with a synchronous build');r(g,I,(N,J)=>{if(N)return O(new Error(N),null);if(S){let V=J,G=!1;g.ref();let K={port:V.port,host:V.host,wait:S.wait,stop(){G||(G=!0,S.stop(),g.unref())}};return g.ref(),S.wait.then(g.unref,g.unref),O(null,K)}return q(J,O)})}}var Ye=(e,n,r,p,g,v,a)=>{let w={},m=s(v,w,"port",ne),j=s(v,w,"host",k),$=s(v,w,"servedir",k),y=s(v,w,"onRequest",ge),O=new Promise((A,T)=>{g["serve-wait"]=(o,l)=>{l.error!==null?T(new Error(l.error)):A(),r(o,{})}});return a.serve={},B(v,w,"in serve() call"),m!==void 0&&(a.serve.port=m),j!==void 0&&(a.serve.host=j),$!==void 0&&(a.serve.servedir=$),g["serve-request"]=(A,T)=>{y&&y(T.args),r(A,{})},{wait:O,stop(){n(p,{command:"serve-stop",key:e},()=>{})}}},Xe=async(e,n,r,p,g,v,a,w,m)=>{let j=[],$=[],y={},O={},A=0,T=0,o=[],l=!1;w=[...w];for(let c of w){let x={};if(typeof c!="object")throw new Error(`Plugin at index ${T} must be an object`);let f=s(c,x,"name",k);if(typeof f!="string"||f==="")throw new Error(`Plugin at index ${T} is missing a name`);try{let b=s(c,x,"setup",ge);if(typeof b!="function")throw new Error("Plugin is missing a setup function");B(c,x,`on plugin ${JSON.stringify(f)}`);let t={name:f,onResolve:[],onLoad:[]};T++;let i=b({initialOptions:a,resolve:(d,h={})=>{if(!l)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof d!="string")throw new Error("The path to resolve must be a string");let E=Object.create(null),U=s(h,E,"pluginName",k),C=s(h,E,"importer",k),R=s(h,E,"namespace",k),F=s(h,E,"resolveDir",k),I=s(h,E,"kind",k),S=s(h,E,"pluginData",ue);return B(h,E,"in resolve() call"),new Promise((L,M)=>{let W={command:"resolve",path:d,key:e,pluginName:f};U!=null&&(W.pluginName=U),C!=null&&(W.importer=C),R!=null&&(W.namespace=R),F!=null&&(W.resolveDir=F),I!=null&&(W.kind=I),S!=null&&(W.pluginData=m.store(S)),n(p,W,(q,N)=>{q!==null?M(new Error(q)):L({errors:H(N.errors,m),warnings:H(N.warnings,m),path:N.path,external:N.external,sideEffects:N.sideEffects,namespace:N.namespace,suffix:N.suffix,pluginData:m.load(N.pluginData)})})})},onStart(d){let h='This error came from the "onStart" callback registered here:',E=oe(new Error(h),g,"onStart");j.push({name:f,callback:d,note:E})},onEnd(d){let h='This error came from the "onEnd" callback registered here:',E=oe(new Error(h),g,"onEnd");$.push({name:f,callback:d,note:E})},onResolve(d,h){let E='This error came from the "onResolve" callback registered here:',U=oe(new Error(E),g,"onResolve"),C={},R=s(d,C,"filter",ce),F=s(d,C,"namespace",k);if(B(d,C,`in onResolve() call for plugin ${JSON.stringify(f)}`),R==null)throw new Error("onResolve() call is missing a filter");let I=A++;y[I]={name:f,callback:h,note:U},t.onResolve.push({id:I,filter:R.source,namespace:F||""})},onLoad(d,h){let E='This error came from the "onLoad" callback registered here:',U=oe(new Error(E),g,"onLoad"),C={},R=s(d,C,"filter",ce),F=s(d,C,"namespace",k);if(B(d,C,`in onLoad() call for plugin ${JSON.stringify(f)}`),R==null)throw new Error("onLoad() call is missing a filter");let I=A++;O[I]={name:f,callback:h,note:U},t.onLoad.push({id:I,filter:R.source,namespace:F||""})},esbuild:g.esbuild});i&&await i,o.push(t)}catch(b){return{ok:!1,error:b,pluginName:f}}}v["on-start"]=async(c,x)=>{let f={errors:[],warnings:[]};await Promise.all(j.map(async({name:b,callback:t,note:i})=>{try{let d=await t();if(d!=null){if(typeof d!="object")throw new Error(`Expected onStart() callback in plugin ${JSON.stringify(b)} to return an object`);let h={},E=s(d,h,"errors",z),U=s(d,h,"warnings",z);B(d,h,`from onStart() callback in plugin ${JSON.stringify(b)}`),E!=null&&f.errors.push(...Z(E,"errors",m,b)),U!=null&&f.warnings.push(...Z(U,"warnings",m,b))}}catch(d){f.errors.push(re(d,g,m,i&&i(),b))}})),r(c,f)},v["on-resolve"]=async(c,x)=>{let f={},b="",t,i;for(let d of x.ids)try{({name:b,callback:t,note:i}=y[d]);let h=await t({path:x.path,importer:x.importer,namespace:x.namespace,resolveDir:x.resolveDir,kind:x.kind,pluginData:m.load(x.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onResolve() callback in plugin ${JSON.stringify(b)} to return an object`);let E={},U=s(h,E,"pluginName",k),C=s(h,E,"path",k),R=s(h,E,"namespace",k),F=s(h,E,"suffix",k),I=s(h,E,"external",P),S=s(h,E,"sideEffects",P),L=s(h,E,"pluginData",ue),M=s(h,E,"errors",z),W=s(h,E,"warnings",z),q=s(h,E,"watchFiles",z),N=s(h,E,"watchDirs",z);B(h,E,`from onResolve() callback in plugin ${JSON.stringify(b)}`),f.id=d,U!=null&&(f.pluginName=U),C!=null&&(f.path=C),R!=null&&(f.namespace=R),F!=null&&(f.suffix=F),I!=null&&(f.external=I),S!=null&&(f.sideEffects=S),L!=null&&(f.pluginData=m.store(L)),M!=null&&(f.errors=Z(M,"errors",m,b)),W!=null&&(f.warnings=Z(W,"warnings",m,b)),q!=null&&(f.watchFiles=ae(q,"watchFiles")),N!=null&&(f.watchDirs=ae(N,"watchDirs"));break}}catch(h){f={id:d,errors:[re(h,g,m,i&&i(),b)]};break}r(c,f)},v["on-load"]=async(c,x)=>{let f={},b="",t,i;for(let d of x.ids)try{({name:b,callback:t,note:i}=O[d]);let h=await t({path:x.path,namespace:x.namespace,suffix:x.suffix,pluginData:m.load(x.pluginData)});if(h!=null){if(typeof h!="object")throw new Error(`Expected onLoad() callback in plugin ${JSON.stringify(b)} to return an object`);let E={},U=s(h,E,"pluginName",k),C=s(h,E,"contents",Oe),R=s(h,E,"resolveDir",k),F=s(h,E,"pluginData",ue),I=s(h,E,"loader",k),S=s(h,E,"errors",z),L=s(h,E,"warnings",z),M=s(h,E,"watchFiles",z),W=s(h,E,"watchDirs",z);B(h,E,`from onLoad() callback in plugin ${JSON.stringify(b)}`),f.id=d,U!=null&&(f.pluginName=U),C instanceof Uint8Array?f.contents=C:C!=null&&(f.contents=Q(C)),R!=null&&(f.resolveDir=R),F!=null&&(f.pluginData=m.store(F)),I!=null&&(f.loader=I),S!=null&&(f.errors=Z(S,"errors",m,b)),L!=null&&(f.warnings=Z(L,"warnings",m,b)),M!=null&&(f.watchFiles=ae(M,"watchFiles")),W!=null&&(f.watchDirs=ae(W,"watchDirs"));break}}catch(h){f={id:d,errors:[re(h,g,m,i&&i(),b)]};break}r(c,f)};let u=(c,x,f)=>f();return $.length>0&&(u=(c,x,f)=>{(async()=>{for(let{name:b,callback:t,note:i}of $)try{await t(c)}catch(d){c.errors.push(await new Promise(h=>x(d,b,i&&i(),h)))}})().then(f)}),l=!0,{ok:!0,requestPlugins:o,runOnEndCallbacks:u}};function Ue(){let e=new Map,n=0;return{load(r){return e.get(r)},store(r){if(r===void 0)return-1;let p=n++;return e.set(p,r),p}}}function oe(e,n,r){let p,g=!1;return()=>{if(g)return p;g=!0;try{let v=(e.stack+"").split(`
`);v.splice(1,1);let a=Ce(n,v,r);if(a)return p={text:e.message,location:a},p}catch{}}}function re(e,n,r,p,g){let v="Internal error",a=null;try{v=(e&&e.message||e)+""}catch{}try{a=Ce(n,(e.stack+"").split(`
`),"")}catch{}return{id:"",pluginName:g,text:v,location:a,notes:p?[p]:[],detail:r?r.store(e):-1}}function Ce(e,n,r){let p="    at ";if(e.readFileSync&&!n[0].startsWith(p)&&n[1].startsWith(p))for(let g=1;g<n.length;g++){let v=n[g];if(v.startsWith(p))for(v=v.slice(p.length);;){let a=/^(?:new |async )?\S+ \((.*)\)$/.exec(v);if(a){v=a[1];continue}if(a=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(v),a){v=a[1];continue}if(a=/^(\S+):(\d+):(\d+)$/.exec(v),a){let w;try{w=e.readFileSync(a[1],"utf8")}catch{break}let m=w.split(/\r\n|\r|\n|\u2028|\u2029/)[+a[2]-1]||"",j=+a[3]-1,$=m.slice(j,j+r.length)===r?r.length:0;return{file:a[1],namespace:"file",line:+a[2],column:Q(m.slice(0,j)).length,length:Q(m.slice(j,j+$)).length,lineText:m+`
`+n.slice(1).join(`
`),suggestion:""}}break}}return null}function te(e,n,r){let p=5,g=n.length<1?"":` with ${n.length} error${n.length<2?"":"s"}:`+n.slice(0,p+1).map((a,w)=>{if(w===p)return`
...`;if(!a.location)return`
error: ${a.text}`;let{file:m,line:j,column:$}=a.location,y=a.pluginName?`[plugin: ${a.pluginName}] `:"";return`
${m}:${j}:${$}: ERROR: ${y}${a.text}`}).join(""),v=new Error(`${e}${g}`);return v.errors=n,v.warnings=r,v}function H(e,n){for(let r of e)r.detail=n.load(r.detail);return e}function $e(e,n){if(e==null)return null;let r={},p=s(e,r,"file",k),g=s(e,r,"namespace",k),v=s(e,r,"line",ne),a=s(e,r,"column",ne),w=s(e,r,"length",ne),m=s(e,r,"lineText",k),j=s(e,r,"suggestion",k);return B(e,r,n),{file:p||"",namespace:g||"",line:v||0,column:a||0,length:w||0,lineText:m||"",suggestion:j||""}}function Z(e,n,r,p){let g=[],v=0;for(let a of e){let w={},m=s(a,w,"id",k),j=s(a,w,"pluginName",k),$=s(a,w,"text",k),y=s(a,w,"location",_e),O=s(a,w,"notes",z),A=s(a,w,"detail",ue),T=`in element ${v} of "${n}"`;B(a,w,T);let o=[];if(O)for(let l of O){let u={},c=s(l,u,"text",k),x=s(l,u,"location",_e);B(l,u,T),o.push({text:c||"",location:$e(x,T)})}g.push({id:m||"",pluginName:j||p,text:$||"",location:$e(y,T),notes:o,detail:r?r.store(A):-1}),v++}return g}function ae(e,n){let r=[];for(let p of e){if(typeof p!="string")throw new Error(`${JSON.stringify(n)} must be an array of strings`);r.push(p)}return r}function Qe({path:e,contents:n}){let r=null;return{path:e,contents:n,get text(){let p=this.contents;return(r===null||p!==n)&&(n=p,r=se(p)),r}}}var He="0.15.13",Ne=e=>fe().build(e),Ke=()=>{throw new Error('The "serve" API only works in node')},Ze=(e,n)=>fe().transform(e,n),et=(e,n)=>fe().formatMessages(e,n),tt=(e,n)=>fe().analyzeMetafile(e,n),nt=()=>{throw new Error('The "buildSync" API only works in node')},rt=()=>{throw new Error('The "transformSync" API only works in node')},st=()=>{throw new Error('The "formatMessagesSync" API only works in node')},it=()=>{throw new Error('The "analyzeMetafileSync" API only works in node')},ee,de,fe=()=>{if(de)return de;throw ee?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},Ae=e=>{e=Be(e||{});let n=e.wasmURL,r=e.wasmModule,p=e.worker!==!1;if(!n&&!r)throw new Error('Must provide either the "wasmURL" option or the "wasmModule" option');if(ee)throw new Error('Cannot call "initialize" more than once');return ee=lt(n||"",r,p),ee.catch(()=>{ee=void 0}),ee},lt=async(e,n,r)=>{let p;if(n)p=n;else{let w=await fetch(e);if(!w.ok)throw new Error(`Failed to download ${JSON.stringify(e)}`);p=await w.arrayBuffer()}let g;if(r){let w=new Blob(['onmessage=(postMessage=>{\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nlet onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});return(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(n,s){c+=g.decode(s);const i=c.lastIndexOf(`\n`);return i!=-1&&(console.log(c.substr(0,i)),c=c.substr(i+1)),s.length},write(n,s,i,a,h,u){if(i!==0||a!==s.length||h!==null){u(r());return}const d=this.writeSync(n,s);u(null,d)},chmod(n,s,i){i(r())},chown(n,s,i,a){a(r())},close(n,s){s(r())},fchmod(n,s,i){i(r())},fchown(n,s,i,a){a(r())},fstat(n,s){s(r())},fsync(n,s){s(null)},ftruncate(n,s,i){i(r())},lchown(n,s,i,a){a(r())},link(n,s,i){i(r())},lstat(n,s){s(r())},mkdir(n,s,i){i(r())},open(n,s,i,a){a(r())},read(n,s,i,a,h,u){u(r())},readdir(n,s){s(r())},readlink(n,s){s(r())},rename(n,s,i){i(r())},rmdir(n,s){s(r())},stat(n,s){s(r())},symlink(n,s,i){i(r())},truncate(n,s,i){i(r())},unlink(n,s){s(r())},utimes(n,s,i,a){a(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),g=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{e!==0&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(e,t)=>{this.mem.setUint32(e+0,t,!0),this.mem.setUint32(e+4,Math.floor(t/4294967296),!0)},n=e=>{const t=this.mem.getUint32(e+0,!0),o=this.mem.getInt32(e+4,!0);return t+o*4294967296},s=e=>{const t=this.mem.getFloat64(e,!0);if(t===0)return;if(!isNaN(t))return t;const o=this.mem.getUint32(e,!0);return this._values[o]},i=(e,t)=>{if(typeof t=="number"&&t!==0){if(isNaN(t)){this.mem.setUint32(e+4,2146959360,!0),this.mem.setUint32(e,0,!0);return}this.mem.setFloat64(e,t,!0);return}if(t===void 0){this.mem.setFloat64(e,0,!0);return}let l=this._ids.get(t);l===void 0&&(l=this._idPool.pop(),l===void 0&&(l=this._values.length),this._values[l]=t,this._goRefCounts[l]=0,this._ids.set(t,l)),this._goRefCounts[l]++;let m=0;switch(typeof t){case"object":t!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(e+4,2146959360|m,!0),this.mem.setUint32(e,l,!0)},a=e=>{const t=n(e+0),o=n(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,o)},h=e=>{const t=n(e+0),o=n(e+8),l=new Array(o);for(let m=0;m<o;m++)l[m]=s(t+m*8);return l},u=e=>{const t=n(e+0),o=n(e+8);return g.decode(new DataView(this._inst.exports.mem.buffer,t,o))},d=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(t)},"runtime.wasmWrite":e=>{e>>>=0;const t=n(e+8),o=n(e+16),l=this.mem.getInt32(e+24,!0);globalThis.fs.writeSync(t,new Uint8Array(this._inst.exports.mem.buffer,o,l))},"runtime.resetMemoryDataView":e=>{e>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":e=>{e>>>=0,c(e+8,(d+performance.now())*1e6)},"runtime.walltime":e=>{e>>>=0;const t=new Date().getTime();c(e+8,t/1e3),this.mem.setInt32(e+16,t%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":e=>{e>>>=0;const t=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(t,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(t);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},n(e+8)+1)),this.mem.setInt32(e+16,t,!0)},"runtime.clearTimeoutEvent":e=>{e>>>=0;const t=this.mem.getInt32(e+8,!0);clearTimeout(this._scheduledTimeouts.get(t)),this._scheduledTimeouts.delete(t)},"runtime.getRandomData":e=>{e>>>=0,crypto.getRandomValues(a(e+8))},"syscall/js.finalizeRef":e=>{e>>>=0;const t=this.mem.getUint32(e+8,!0);if(this._goRefCounts[t]--,this._goRefCounts[t]===0){const o=this._values[t];this._values[t]=null,this._ids.delete(o),this._idPool.push(t)}},"syscall/js.stringVal":e=>{e>>>=0,i(e+24,u(e+8))},"syscall/js.valueGet":e=>{e>>>=0;const t=Reflect.get(s(e+8),u(e+16));e=this._inst.exports.getsp()>>>0,i(e+32,t)},"syscall/js.valueSet":e=>{e>>>=0,Reflect.set(s(e+8),u(e+16),s(e+32))},"syscall/js.valueDelete":e=>{e>>>=0,Reflect.deleteProperty(s(e+8),u(e+16))},"syscall/js.valueIndex":e=>{e>>>=0,i(e+24,Reflect.get(s(e+8),n(e+16)))},"syscall/js.valueSetIndex":e=>{e>>>=0,Reflect.set(s(e+8),n(e+16),s(e+24))},"syscall/js.valueCall":e=>{e>>>=0;try{const t=s(e+8),o=Reflect.get(t,u(e+16)),l=h(e+32),m=Reflect.apply(o,t,l);e=this._inst.exports.getsp()>>>0,i(e+56,m),this.mem.setUint8(e+64,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+56,t),this.mem.setUint8(e+64,0)}},"syscall/js.valueInvoke":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.apply(t,void 0,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueNew":e=>{e>>>=0;try{const t=s(e+8),o=h(e+16),l=Reflect.construct(t,o);e=this._inst.exports.getsp()>>>0,i(e+40,l),this.mem.setUint8(e+48,1)}catch(t){e=this._inst.exports.getsp()>>>0,i(e+40,t),this.mem.setUint8(e+48,0)}},"syscall/js.valueLength":e=>{e>>>=0,c(e+16,parseInt(s(e+8).length))},"syscall/js.valuePrepareString":e=>{e>>>=0;const t=f.encode(String(s(e+8)));i(e+16,t),c(e+24,t.length)},"syscall/js.valueLoadString":e=>{e>>>=0;const t=s(e+8);a(e+16).set(t)},"syscall/js.valueInstanceOf":e=>{e>>>=0,this.mem.setUint8(e+24,s(e+8)instanceof s(e+16)?1:0)},"syscall/js.copyBytesToGo":e=>{e>>>=0;const t=a(e+8),o=s(e+32);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},"syscall/js.copyBytesToJS":e=>{e>>>=0;const t=s(e+8),o=a(e+16);if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray)){this.mem.setUint8(e+48,0);return}const l=o.subarray(0,t.length);t.set(l),c(e+40,l.length),this.mem.setUint8(e+48,1)},debug:e=>{console.log(e)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let n=4096;const s=e=>{const t=n,o=f.encode(e+"\\0");return new Uint8Array(this.mem.buffer,n,o.length).set(o),n+=o.length,n%8!==0&&(n+=8-n%8),t},i=this.argv.length,a=[];this.argv.forEach(e=>{a.push(s(e))}),a.push(0),Object.keys(this.env).sort().forEach(e=>{a.push(s(`${e}=${this.env[e]}`))}),a.push(0);const u=n;a.forEach(e=>{this.mem.setUint32(n,e,!0),this.mem.setUint32(n+4,0,!0),n+=8});const d=4096+8192;if(n>=d)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(i,u),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const n=this;return function(){const s={id:c,this:this,args:arguments};return n._pendingEvent=s,n._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,g=globalThis.fs,c="";g.writeSync=(h,u)=>{if(h===1)postMessage(u);else if(h===2){c+=f.decode(u);let d=c.split(`\n`);d.length>1&&console.log(d.slice(0,-1).join(`\n`)),c=d[d.length-1]}else throw new Error("Bad write");return u.length};let n=[],s,i=0;onmessage=({data:h})=>{h.length>0&&(n.push(h),s&&s())},g.read=(h,u,d,e,t,o)=>{if(h!==0||d!==0||e!==u.length||t!==null)throw new Error("Bad read");if(n.length===0){s=()=>g.read(h,u,d,e,t,o);return}let l=n[0],m=Math.max(0,Math.min(e,l.length-i));u.set(l.subarray(i,i+m),d),i+=m,i===l.length&&(n.shift(),i=0),o(null,m)};let a=new globalThis.Go;a.argv=["","--service=0.15.13"],r instanceof WebAssembly.Module?WebAssembly.instantiate(r,a.importObject).then(h=>a.run(h)):WebAssembly.instantiate(r,a.importObject).then(({instance:h})=>a.run(h))},r=>onmessage(r);})(postMessage)'],{type:"text/javascript"});g=new Worker(URL.createObjectURL(w))}else{let w=(m=>{let j,$={};for(let y=self;y;y=Object.getPrototypeOf(y))for(let O of Object.getOwnPropertyNames(y))O in $||Object.defineProperty($,O,{get:()=>self[O]});return(()=>{let y=()=>{let T=new Error("not implemented");return T.code="ENOSYS",T};if(!$.fs){let T="";$.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(o,l){T+=A.decode(l);let u=T.lastIndexOf(`
`);return u!=-1&&(console.log(T.substr(0,u)),T=T.substr(u+1)),l.length},write(o,l,u,c,x,f){if(u!==0||c!==l.length||x!==null){f(y());return}let b=this.writeSync(o,l);f(null,b)},chmod(o,l,u){u(y())},chown(o,l,u,c){c(y())},close(o,l){l(y())},fchmod(o,l,u){u(y())},fchown(o,l,u,c){c(y())},fstat(o,l){l(y())},fsync(o,l){l(null)},ftruncate(o,l,u){u(y())},lchown(o,l,u,c){c(y())},link(o,l,u){u(y())},lstat(o,l){l(y())},mkdir(o,l,u){u(y())},open(o,l,u,c){c(y())},read(o,l,u,c,x,f){f(y())},readdir(o,l){l(y())},readlink(o,l){l(y())},rename(o,l,u){u(y())},rmdir(o,l){l(y())},stat(o,l){l(y())},symlink(o,l,u){u(y())},truncate(o,l,u){u(y())},unlink(o,l){l(y())},utimes(o,l,u,c){c(y())}}}if($.process||($.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw y()},pid:-1,ppid:-1,umask(){throw y()},cwd(){throw y()},chdir(){throw y()}}),!$.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!$.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!$.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!$.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");let O=new TextEncoder("utf-8"),A=new TextDecoder("utf-8");$.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;let T=(t,i)=>{this.mem.setUint32(t+0,i,!0),this.mem.setUint32(t+4,Math.floor(i/4294967296),!0)},o=t=>{let i=this.mem.getUint32(t+0,!0),d=this.mem.getInt32(t+4,!0);return i+d*4294967296},l=t=>{let i=this.mem.getFloat64(t,!0);if(i===0)return;if(!isNaN(i))return i;let d=this.mem.getUint32(t,!0);return this._values[d]},u=(t,i)=>{if(typeof i=="number"&&i!==0){if(isNaN(i)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,i,!0);return}if(i===void 0){this.mem.setFloat64(t,0,!0);return}let d=this._ids.get(i);d===void 0&&(d=this._idPool.pop(),d===void 0&&(d=this._values.length),this._values[d]=i,this._goRefCounts[d]=0,this._ids.set(i,d)),this._goRefCounts[d]++;let h=0;switch(typeof i){case"object":i!==null&&(h=1);break;case"string":h=2;break;case"symbol":h=3;break;case"function":h=4;break}this.mem.setUint32(t+4,2146959360|h,!0),this.mem.setUint32(t,d,!0)},c=t=>{let i=o(t+0),d=o(t+8);return new Uint8Array(this._inst.exports.mem.buffer,i,d)},x=t=>{let i=o(t+0),d=o(t+8),h=new Array(d);for(let E=0;E<d;E++)h[E]=l(i+E*8);return h},f=t=>{let i=o(t+0),d=o(t+8);return A.decode(new DataView(this._inst.exports.mem.buffer,i,d))},b=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":t=>{t>>>=0;let i=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(i)},"runtime.wasmWrite":t=>{t>>>=0;let i=o(t+8),d=o(t+16),h=this.mem.getInt32(t+24,!0);$.fs.writeSync(i,new Uint8Array(this._inst.exports.mem.buffer,d,h))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,T(t+8,(b+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;let i=new Date().getTime();T(t+8,i/1e3),this.mem.setInt32(t+16,i%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;let i=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(i,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(i);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},o(t+8)+1)),this.mem.setInt32(t+16,i,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;let i=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(i)),this._scheduledTimeouts.delete(i)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(c(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;let i=this.mem.getUint32(t+8,!0);if(this._goRefCounts[i]--,this._goRefCounts[i]===0){let d=this._values[i];this._values[i]=null,this._ids.delete(d),this._idPool.push(i)}},"syscall/js.stringVal":t=>{t>>>=0,u(t+24,f(t+8))},"syscall/js.valueGet":t=>{t>>>=0;let i=Reflect.get(l(t+8),f(t+16));t=this._inst.exports.getsp()>>>0,u(t+32,i)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(l(t+8),f(t+16),l(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(l(t+8),f(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,u(t+24,Reflect.get(l(t+8),o(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(l(t+8),o(t+16),l(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{let i=l(t+8),d=Reflect.get(i,f(t+16)),h=x(t+32),E=Reflect.apply(d,i,h);t=this._inst.exports.getsp()>>>0,u(t+56,E),this.mem.setUint8(t+64,1)}catch(i){t=this._inst.exports.getsp()>>>0,u(t+56,i),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{let i=l(t+8),d=x(t+16),h=Reflect.apply(i,void 0,d);t=this._inst.exports.getsp()>>>0,u(t+40,h),this.mem.setUint8(t+48,1)}catch(i){t=this._inst.exports.getsp()>>>0,u(t+40,i),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{let i=l(t+8),d=x(t+16),h=Reflect.construct(i,d);t=this._inst.exports.getsp()>>>0,u(t+40,h),this.mem.setUint8(t+48,1)}catch(i){t=this._inst.exports.getsp()>>>0,u(t+40,i),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,T(t+16,parseInt(l(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;let i=O.encode(String(l(t+8)));u(t+16,i),T(t+24,i.length)},"syscall/js.valueLoadString":t=>{t>>>=0;let i=l(t+8);c(t+16).set(i)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,l(t+8)instanceof l(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;let i=c(t+8),d=l(t+32);if(!(d instanceof Uint8Array||d instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let h=d.subarray(0,i.length);i.set(h),T(t+40,h.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;let i=l(t+8),d=c(t+16);if(!(i instanceof Uint8Array||i instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let h=d.subarray(0,i.length);i.set(h),T(t+40,h.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}async run(T){if(!(T instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=T,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,$,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[$,5],[this,6]]),this._idPool=[],this.exited=!1;let o=4096,l=b=>{let t=o,i=O.encode(b+"\0");return new Uint8Array(this.mem.buffer,o,i.length).set(i),o+=i.length,o%8!==0&&(o+=8-o%8),t},u=this.argv.length,c=[];this.argv.forEach(b=>{c.push(l(b))}),c.push(0),Object.keys(this.env).sort().forEach(b=>{c.push(l(`${b}=${this.env[b]}`))}),c.push(0);let x=o;c.forEach(b=>{this.mem.setUint32(o,b,!0),this.mem.setUint32(o+4,0,!0),o+=8});let f=4096+8192;if(o>=f)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(u,x),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(T){let o=this;return function(){let l={id:T,this:this,args:arguments};return o._pendingEvent=l,o._resume(),l.result}}}})(),j=({data:y})=>{let O=new TextDecoder,A=$.fs,T="";A.writeSync=(x,f)=>{if(x===1)m(f);else if(x===2){T+=O.decode(f);let b=T.split(`
`);b.length>1&&console.log(b.slice(0,-1).join(`
`)),T=b[b.length-1]}else throw new Error("Bad write");return f.length};let o=[],l,u=0;j=({data:x})=>{x.length>0&&(o.push(x),l&&l())},A.read=(x,f,b,t,i,d)=>{if(x!==0||b!==0||t!==f.length||i!==null)throw new Error("Bad read");if(o.length===0){l=()=>A.read(x,f,b,t,i,d);return}let h=o[0],E=Math.max(0,Math.min(t,h.length-u));f.set(h.subarray(u,u+E),b),u+=E,u===h.length&&(o.shift(),u=0),d(null,E)};let c=new $.Go;c.argv=["","--service=0.15.13"],y instanceof WebAssembly.Module?WebAssembly.instantiate(y,c.importObject).then(x=>c.run(x)):WebAssembly.instantiate(y,c.importObject).then(({instance:x})=>c.run(x))},y=>j(y)})(m=>g.onmessage({data:m}));g={onmessage:null,postMessage:m=>setTimeout(()=>w({data:m})),terminate(){}}}g.postMessage(p),g.onmessage=({data:w})=>v(w);let{readFromStdout:v,service:a}=Ve({writeToStdin(w){g.postMessage(w)},isSync:!1,isWriteUnavailable:!0,esbuild:pe});de={build:w=>new Promise((m,j)=>a.buildOrServe({callName:"build",refs:null,serveOptions:null,options:w,isTTY:!1,defaultWD:"/",callback:($,y)=>$?j($):m(y)})),transform:(w,m)=>new Promise((j,$)=>a.transform({callName:"transform",refs:null,input:w,options:m||{},isTTY:!1,fs:{readFile(y,O){O(new Error("Internal error"),null)},writeFile(y,O){O(null)}},callback:(y,O)=>y?$(y):j(O)})),formatMessages:(w,m)=>new Promise((j,$)=>a.formatMessages({callName:"formatMessages",refs:null,messages:w,options:m,callback:(y,O)=>y?$(y):j(O)})),analyzeMetafile:(w,m)=>new Promise((j,$)=>a.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof w=="string"?w:JSON.stringify(w),options:m,callback:(y,O)=>y?$(y):j(O)}))}},ot=pe;export{Ne as build,Ae as initialize};
